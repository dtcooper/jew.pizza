<html>
<head>
  <title>Server-Sent Events Tester</title>
  <script>
    var evtSource = new EventSource("/")
    var received = 0
    evtSource.onmessage = function(e) {
      received += 1
      var message = (new Date()) + ': ' + JSON.stringify(JSON.parse(e.data), null, 2) + "\n\n"
      var elem = document.getElementById('response')
      elem.innerText = message + elem.innerText
      document.getElementById('received').innerText = received
    }
  </script>
</head>
<body>
  <h1>Messages: <span id="received">0</span> received</h1>
  <pre id="response"></pre>
</body>
</html>
